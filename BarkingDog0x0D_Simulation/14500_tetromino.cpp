// 그대로 내면 될 듯?????
// 19 * 500 * 500 * 4 * 4 = 76000000 통과할 것 같노 심지어 4 * 4까지는 가지도 않음 2*3이 최대.
#include <bits/stdc++.h>
using namespace std;

int r, c, ans, tmp;
int brd[501][501];
int tet[19][4][4] =
{
    {
        {1,1,1,1},
        {0,0,0,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,0,0,0},
        {1,0,0,0},
        {1,0,0,0},
        {1,0,0,0}
    },
    {
        {1,1,0,0},
        {1,1,0,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,0,0,0},
        {1,0,0,0},
        {1,1,0,0},
        {0,0,0,0}
    },
    {
        {0,1,0,0},
        {0,1,0,0},
        {1,1,0,0},
        {0,0,0,0}
    },
    {
        {1,1,1,0},
        {1,0,0,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,0,0,0},
        {1,1,1,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,1,0,0},
        {0,1,0,0},
        {0,1,0,0},
        {0,0,0,0}
    },
    {
        {1,1,0,0},
        {1,0,0,0},
        {1,0,0,0},
        {0,0,0,0}
    },
    {
        {0,0,1,0},
        {1,1,1,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,1,1,0},
        {0,0,1,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,0,0,0},
        {1,1,0,0},
        {0,1,0,0},
        {0,0,0,0}
    },
    {
        {0,1,0,0},
        {1,1,0,0},
        {1,0,0,0},
        {0,0,0,0}
    },
    {
        {0,1,1,0},
        {1,1,0,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,1,0,0},
        {0,1,1,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {1,1,1,0},
        {0,1,0,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {0,1,0,0},
        {1,1,1,0},
        {0,0,0,0},
        {0,0,0,0}
    },
    {
        {0,1,0,0},
        {1,1,0,0},
        {0,1,0,0},
        {0,0,0,0}
    },
    {
        {1,0,0,0},
        {1,1,0,0},
        {1,0,0,0},
        {0,0,0,0}
    }
};

pair<int, int> arr[19] =
{
    {1, 4}, {4, 1},
    {2, 2},
    {3, 2}, {3, 2}, {2, 3}, {2, 3}, {3, 2}, {3, 2}, {2, 3}, {2, 3},
    {3, 2}, {3, 2}, {2, 3}, {2, 3},
    {2, 3}, {2, 3}, {3, 2}, {3, 2}
};


int main() {
    ios::sync_with_stdio(0);
    cin.tie(0);

    cin >> r >> c;

    for (int i = 0; i < r; i++) {
        for (int j = 0; j < c; j++) {
            cin >> brd[i][j];
        }
    }

    for (int idx = 0; idx < 19; idx++) {
        for (int i = 0; i <= r-arr[idx].first; i++) {
            for (int j = 0; j <= c-arr[idx].second; j++) {
                tmp = 0;
                for (int x = 0; x < arr[idx].first; x++) {
                    for (int y = 0; y < arr[idx].second; y++) {
                        tmp += tet[idx][x][y] * brd[i+x][j+y];
                    }
                }
                ans = max(ans, tmp);
                // cout << tmp << '\n'; // 모든 답 확인하는 용도
            }
        }
        // cout << '\n'; // 모든 답 확인하는 용도
    }

    cout << ans;
}

// 5 5
// 1 2 3 4 5
// 6 7 8 9 10
// 11 12 13 14 15
// 16 17 18 19 20
// 21 22 23 24 25